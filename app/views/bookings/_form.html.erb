
<%= form_for @booking,:html => { :id => "cleaning-form" } do |f| %>
  <% if @booking.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@booking.errors.count, "error") %> prohibited this booking from being saved:</h2>

      <ul>
      <% @booking.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div id="booking-details" style="display:none;">
    <div class="header">
      <h1>Customize Your Cleaning</h1>
    </div>
        
        <div class="btn-group btn-group-lg house-details rooms">
            <div class="header">
              <h4>Bedrooms</h4>
            </div>
          
          <input type="hidden" id="bedroom-value" value="1 bedroom" name="booking[job][bedroom]"/>
          <div class="house-buttons btn-group bedroom roomcount">
            <button type="button" class="btn btn-success btn-number" onclick='setBedroomValue("1 bedroom")'>1</button>
            <button type="button" class="btn btn-number" onclick='setBedroomValue("2 bedrooms")'>2</button>
            <button type="button" class="btn btn-number" onclick='setBedroomValue("3 bedrooms")'>3</button>
            <button type="button" class="btn btn-number" onclick='setBedroomValue("4 bedrooms")'>4</button>
            <button type="button" class="btn btn-number" onclick='setBedroomValue("5+ bedrooms")'>5+</button>
          </div>
        </div>

      <div class="btn-group btn-group-lg house-details rooms">
          <div class="header">
            <h4>Bathrooms</h4>
          </div>

        <input type="hidden" id="bathroom-value" value="1 bathroom" name="booking[job][bathroom]"/>
        <div class="house-buttons btn-group">
          <button type="button" class="btn btn-success btn-number" onclick='setBathroomValue("1 bathroom")'>1</button>
          <button type="button" class="btn btn-number" onclick='setBathroomValue("2 bathrooms")'>2</button>
          <button type="button" class="btn btn-number" onclick='setBathroomValue("3+ bathrooms")'>3+</button>
        </div>
      </div>

      <div class="btn-group btn-group-lg house-details" id="extras">
          <div class="header">
            <h4>Extras</h4>
          </div>
        <div id="house-extras">

          <input type="hidden" id="extras-value" value="" name="booking[job][extras]"/>
          <div class="house-buttons btn-group">
            <button type="button" class="btn" onclick='setExtrasValue("Fridge")'>Fridge</button>
            <button type="button" class="btn" onclick='setExtrasValue("Oven")'>Oven</button>
            <button type="button" class="btn" onclick='setExtrasValue("Inside Cabinets")'>Inside Cabinets</button>
          </div>
          <div class="house-buttons btn-group">
            <button type="button" class="btn" onclick='setExtrasValue("Interior Windows")'>Interior Windows</button>
            <button type="button" class="btn" onclick='setExtrasValue("Interior Walls")'>Interior Walls</button>
          </div>
        </div>
      </div>

    <div class="house-details btn-group hours">  
      <div class="header">
        <h4>Recommended Hours (2 minimum)</h4>
      </div>
      <div id="hour-dropdown">
        <%= f.select :hours, (2..13), :as => :booking["hours"] %>
      </div>
    </div>



      <%= link_to "Next", 'javascript:void(0)', :id => "booking-details-complete", :class => "btn btn-success btn-block" %>
  </div>

  <div id="contact-info" style="display:block;">
    <div id>
    <%= f.fields_for :customer do |builder| %> 
      <div class="header">
        <h1>Contact Info</h1>
      </div>
        
        <div class="house-details">
          <div class="header">
              <h4>Name</h4>
          </div>

          <%= builder.text_field :name, :as => :customer["name"] %><br />
        </div>

        <%= label_tag :address %>
        <%= builder.text_field :address, :as => :customer["address"], :id => "street_address", :placeholder => "Street address" %><br />

        <div class="row address">
        <div id="the_city" class="span1">
          <%= builder.text_field :city, :as => :customer["city"], :id => "city", :placeholder => "City" %><br /> 
        </div>
        <div id="the_state" class="span1">
          <%= builder.text_field :state, :as => :customer["state"], :id => "state", :placeholder => "State" %><br />
        </div>
        <div id="the_zipcode" class="span1">
          <%= builder.text_field :zipcode, :as => :customer["zipcode"], :id => "zipcode", :placeholder => "Zipcode" %><br />
        </div>
         </div>    
        
        <%= label_tag :email %>
        <%= builder.text_field :email, :as => :customer["email"] %><br />

        <%= label_tag :phone %>
        <%= builder.text_field :phone, :as => :customer["phone"] %><br />


        <%= link_to "Next", '#schedule-time', :id => "contact-info-complete", :class => "btn btn-success btn-block" %>

    <% end %>  
    </div> 
  </div>

  <div id="schedule-time" style="display:none;">
    <div class="header">
      <h1>Schedule a time</h1>
    </div>

      <%= f.label :time %>
      <%= f.text_field :time, :id => "schedule-time", :as => :booking["time"] %><br /><br />

      <%= link_to "Next", '#payment-info', :id => "schedule-time-complete", :class => "btn btn-success btn-block" %>
  </div>

  <div id="payment-info" style="display:none;">
    <div class="header">
      <h1>Payment info</h1>
    </div>

      <%= label_tag :card_number, "Credit Card Number" %>
      <%= text_field_tag :card_number, nil, name: nil, :placeholder => "Card Number", :data => {:stripe => 'number' }%>

      <%= label_tag :card_code, "Security Code on Card (CVV)" %>
      <%= text_field_tag :card_code, nil, name: nil, :placeholder => "3 or 4 digits", :data => {:stripe => 'cvc' }%>

      <%= label_tag :card_month, "Card Expiration" %>
      <%= select_month nil, {add_month_numbers: true}, {name: nil, id: "card_month", :data => {:stripe => 'exp-month' } } %>
      <%= select_year nil, {start_year: Date.today.year, end_year: Date.today.year+15}, {name: nil, id: "card_year", :data => {:stripe => 'exp-year' } } %>

      <div style="display:none;">
      <%= link_to "Next", '#finalize-booking', :id => "payment-info-complete", :class => "btn btn-success btn-block" %>
      </div>

  </div>


  <div class="actions" id="finalize-booking" style="display:none;">
    <%= f.submit %>
  </div>

<% end %>
